<?xml version="1.0" encoding="UTF-8"?>
<persistence version="3.0"
             xmlns="https://jakarta.ee/xml/ns/persistence"
             xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
             xsi:schemaLocation="https://jakarta.ee/xml/ns/persistence
                                 https://jakarta.ee/xml/ns/persistence/persistence_3_0.xsd">
    
    <!-- ========================================
         Berry Books Persistence Unit
         ========================================
         - トランザクションタイプ: JTA
         - データソース: jdbc/HsqldbDS (JNDI)
         - スキーマ生成: none (手動SQLスクリプト使用)
         ======================================== -->
    
    <persistence-unit name="BerryBooksPU" transaction-type="JTA">
        
        <!-- JNDIデータソース -->
        <jta-data-source>jdbc/HsqldbDS</jta-data-source>
        
        <!-- Jakarta EE 10 Provider: EclipseLink -->
        <!-- Payara Server 6にバンドルされているため、明示的な指定は不要 -->
        
        <!-- スキーマ生成設定 -->
        <properties>
            <!-- スキーマ生成は手動SQLスクリプトで実行するため無効化 -->
            <property name="jakarta.persistence.schema-generation.database.action" value="none"/>
            
            <!-- EclipseLinkログ設定 -->
            <property name="eclipselink.logging.level" value="FINE"/>
            <property name="eclipselink.logging.parameters" value="true"/>
            <property name="eclipselink.logging.timestamp" value="true"/>
            <property name="eclipselink.logging.thread" value="false"/>
            <property name="eclipselink.logging.session" value="false"/>
            
            <!-- キャッシュ設定（学習用に2次キャッシュを無効化） -->
            <property name="eclipselink.cache.shared.default" value="false"/>
            
            <!-- トランザクション設定 -->
            <property name="eclipselink.target-database" value="HSQL"/>
        </properties>
        
    </persistence-unit>
    
</persistence>
