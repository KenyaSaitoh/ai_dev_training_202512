# berry-books - 要件定義書

**プロジェクトID:** 001-berry-books  
**バージョン:** 1.0.0  
**最終更新日:** 2025-12-14  
**ステータス:** 要件確定

---

## 1. プロジェクト概要

### 1.1 構築するもの

berry-booksは、書籍を検索・購入できるオンライン書店Webアプリケーションである。顧客は書籍を閲覧し、ショッピングカートに追加し、注文を確定できる。

### 1.2 プロジェクトの目的

本システムは、Jakarta EE 10およびPayara Serverを使用したエンタープライズWebアプリケーションの学習を目的として構築される。

---

## 2. ビジネス目標と成功指標

### 2.1 ビジネス目標

| 目標 | 説明 |
|------|------|
| オンライン販売チャネル | 書籍のオンライン販売チャネルを提供 |
| 顧客体験の向上 | 顧客の購買体験を向上させる |
| 在庫管理の効率化 | 在庫管理の効率化を実現 |
| 注文履歴の可視化 | 顧客が過去の注文履歴を確認できる |

### 2.2 成功指標

| 指標 | 目標値 |
|------|--------|
| 書籍検索から購入までのコンバージョン率 | 測定・改善 |
| ショッピングカート放棄率 | 最小化 |
| 在庫不整合の発生率 | 0% |
| ユーザーの注文完了率 | 最大化 |

---

## 3. ユーザーペルソナ

### 3.1 一般顧客（エンドユーザー）

**プロフィール:**
- 年齢: 20-50代
- 目的: 技術書・専門書の購入
- デバイス: PC、タブレット
- 技術レベル: 基本的なWeb操作ができる

**ニーズ:**
- 効率的に目的の書籍を見つけたい
- 購入前に在庫状況を確認したい
- 安全に注文処理を完了したい
- 過去の注文履歴を参照したい

**課題:**
- 書籍が多すぎて目的の本を見つけにくい
- 注文確定後に在庫切れが判明する
- 配送料金が明確でない

---

## 4. 機能要件

### 4.1 コア機能概要

本システムは、以下の5つのコア機能を提供する。

#### 機能 4.1.1: 書籍検索・閲覧

**概要:**  
顧客がカテゴリやキーワードで書籍を検索し、検索結果を一覧表示できる機能。

**主要機能:**
- カテゴリ別検索
- キーワード検索（書籍名・著者名）
- 検索結果の一覧表示
- 書籍詳細情報の表示（在庫状況含む）

#### 機能 4.1.2: ショッピングカート管理

**概要:**  
顧客が選択した書籍をカートに追加し、購入前に内容を確認・調整できる機能。

**主要機能:**
- カートへの書籍追加
- カート内容の確認
- 数量変更
- カートからの削除
- 合計金額の自動計算

#### 機能 4.1.3: 注文処理

**概要:**  
カート内の書籍を購入し、配送先と決済方法を指定して注文を確定する機能。

**主要機能:**
- 配送先情報の入力
- 決済方法の選択
- 配送料金の自動計算
- 注文内容の確認
- 注文確定処理
- 在庫の自動減算
- 注文完了通知

#### 機能 4.1.4: 顧客管理・認証

**概要:**  
新規顧客がアカウントを登録し、ログインして書籍を購入できる機能。

**主要機能:**
- 新規顧客登録
- ログイン・ログアウト
- セッション管理
- 認証必須ページの保護

#### 機能 4.1.5: 注文履歴参照

**概要:**  
登録顧客が過去の注文履歴を確認し、購入済み書籍と配送状況を把握できる機能。

**主要機能:**
- 注文履歴一覧の表示
- 注文詳細の確認
- 注文日降順でのソート

---

## 5. 非機能要件

### 5.1 パフォーマンス要件

| 指標 | 目標値 |
|------|--------|
| 書籍検索レスポンスタイム | 2秒以内 |
| ページ読み込み時間 | 3秒以内 |
| 注文処理完了時間 | 3秒以内 |
| 同時ログインユーザー数 | 50ユーザー |

### 5.2 ユーザビリティ要件

| 要件 | 説明 |
|------|------|
| レスポンシブデザイン | PC、タブレット対応 |
| エラーメッセージ | 明確で理解しやすい日本語メッセージ |
| 操作性 | 3クリック以内で主要機能にアクセス可能 |
| フィードバック | 処理中はローディング表示 |

### 5.3 セキュリティ要件

| 要件 | 説明 |
|------|------|
| 認証 | 全画面で認証必須（公開ページを除く） |
| セッション管理 | HTTP-Only Cookie使用 |
| 入力検証 | サーバーサイドで全入力を検証 |
| パスワード保存 | 平文（学習用のみ、本番環境では非推奨） |

**公開ページ（認証不要）:**
- ログイン画面
- 新規登録画面
- 登録完了画面

### 5.4 信頼性要件

| 要件 | 説明 |
|------|------|
| データ整合性 | 楽観的ロックで在庫不整合を防止 |
| トランザクション | 注文処理は単一トランザクションで実行 |
| エラーハンドリング | 全エラーをユーザーに通知 |
| ログ出力 | 全主要処理でログを記録 |

---

## 6. スコープ外

以下の機能は本プロジェクトの対象外です：

- 決済システム連携（決済方法選択のみ実装）
- 配送業者API連携
- メール通知機能
- レビュー・評価機能
- お気に入り機能
- クーポン・割引機能
- ポイントシステム
- モバイルアプリ
- 多言語対応
- 管理者画面

---

## 7. 依存関係と前提条件

### 7.1 依存関係

- 顧客データベースが利用可能であること
- 書籍マスタデータが事前に登録されていること
- ネットワーク接続が安定していること

### 7.2 前提条件

| 項目 | 内容 |
|------|------|
| プロジェクトの目的 | 学習目的で構築される |
| 運用環境 | 本番運用は想定しない |
| 同時アクセスユーザー数 | 最大50ユーザー |
| データベース構成 | シングルサーバー構成 |
| パスワード保存方式 | 平文保存（学習用のみ） |

---

## 8. 制約事項

### 8.1 技術的制約

- Jakarta EE 10準拠の技術スタックを使用
- Payara Server 6.x上で動作
- HSQLDB（組み込みデータベース）を使用
- Java 21を使用

### 8.2 ビジネス制約

- 開発期間: 制約なし（学習目的）
- 予算: なし
- チーム規模: 個人学習

---

## 9. 成功基準

本プロジェクトが成功したと判断される条件：

- [ ] 全てのユーザーストーリーが実装され、受入基準を満たす
- [ ] 全てのビジネスルールが実装されている
- [ ] 楽観的ロックが正常に動作し、在庫不整合が発生しない
- [ ] 全てのエラーシナリオが適切に処理される
- [ ] 非機能要件を満たす
- [ ] 主要機能の手動テストが完了している


